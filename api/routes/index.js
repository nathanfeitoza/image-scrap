var express = require('express');
var router = express.Router();

const upload = require('../bin/upload.js');
const scrapping = require('../bin/scrapping.js');
const base64 = 'data:image/jpeg;base64,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';


/* GET home page. */
router.get('/', function(req, res, next) {
  upload.uploadImgur(base64)
    .then((link) => {
        console.log(link)
        scrapping.requestImages(link)
            .then((data) => {
                res.render('index', { title: 'Express', data });
            }).catch(err => console.log(err))
    }).catch(err => console.log(err))
  
});

module.exports = router;
